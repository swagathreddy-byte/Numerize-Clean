{% extends "ClientDashboard/ui8-nazox/mobile/client_base.html" %}

{% load static %}
{% block extrastyle %}

<!--<link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />-->
<style>
    .custom-accordion .card-header.collapsed i.accor-plus-icon:before {
        content: "\F0415";
    }
    td.collapsed i.accor-plus-icon:before {
        content: "\F0415";
    }
    .summary-btn i.active,.detail-btn i.active
    {
        color:darkgreen !important;
    }
    .border-bottom-light
    {
        border-bottom: 1.5px solid #eff2f7 !important;
    }
    .popover
    {
        background: #343a40 !important;
        box-shadow: 1px 1px 3px 2px #adafb2;
    }
    .popover .arrow::after, .popover .arrow::before
    {
        border-right-color: #343a40 !important;
    }
    .popover-header
    {
        background: #343a40 !important;
        color: white;
    }
    .editable-click, a.editable-click, a.editable-click:hover
    {
    //border-bottom: dashed 1px #ffffff;
    //color: #1cbb8c;
    }
    .btn-floating
    {
        position:fixed;
        top:75px;
        z-index:2;
        right: 2px;
    }
    .btn-floating:hover
    {
        cursor: pointer;
        border-radius: 20px;
    }
    .editableform .form-control {
        width: 150px;
    }
    .bg-parrot{
        background-color: #7fc342;
    }
    .text-parrot{
        color: #7fc342;
    }

    .bg-grey{
        background-color: #545863;
    }
    .combodate
    {
        display:flex !important;
    }
    .font-12px
    {
        font-size:12px !important;
    }
</style>

{% endblock %}
{% block content %}
<div class="page-content">
    <div class="container-fluid ">
        <button type="button" id="floating-btn" class="btn bg-parrot waves-effect btn-rounded btn-floating"  data-toggle="modal" data-target="#myModal" >
            <!--               <button type="button" id="floating-btn" class="btn bg-parrot waves-effect btn-rounded btn-floating"  data-toggle="popover" data-container="body" data-original-title="Filters"  data-placement="auto" data-html="true" data-content="Date" data-color="primary">-->
            <i class="ri-settings-2-line text-white " style="font-size: 25px !important;"></i>
        </button>
        <div id="myModal" class="modal fade modal-mini" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-dialog-centered ml-5 mr-5">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title mt-0" id="myModalLabel">Filters</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">Ã—</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-12 mt-1">

                                <p class="text-muted mb-0" for="report-date">Date</p>
                            </div>
                            <div class="col-12">
                                <a href="#" id="report-date" data-type="combodate" :data-value="today_mon_year" data-format="MMM/YYYY" data-viewformat="MMM/YYYY" data-template="MMM / YYYY" data-pk="1"  data-title="Select Date of birth"></a>
                            </div>

                            <div class="col-12 pt-3">
                                <p class="text-muted mb-0" for="report-type">Pick Report Type</p>
                            </div>
                            <div class="col-12">
                                <a href="#" id="report-type" data-type="select" data-pk="1" :data-value="sel_report" data-title="Select Report Type"></a>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>
        <div class="row pl_notes d-none">

            <div v-if="pl_loaded" class="col-xl-12">

                <div v-for="(value, key) in pl_data.results.comments">
                    <div class="card-header pl-0 pr-0 text-dark collapsed" >
                        <h4 class="card-title font-weight-bold mb-2">[[key]]</h4>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-12 d-flex" v-for="(it, index) in value">
                                    <img v-if="it.comment_type == 'Trend Observations' " src="{% static 'ui8-nazox/assets/images/flat-icons/bar-chart-notes.png' %}" class="mr-3 avatar-xs">
                                    <img v-if="it.comment_type == 'Requiring Special Attention' " src="{% static 'ui8-nazox/assets/images/flat-icons/exclamation-sign.png' %}" class="mr-3 avatar-xs">
                                    <img v-if="it.comment_type == 'Missing Information' " src="{% static 'ui8-nazox/assets/images/flat-icons/question.png' %}" class="mr-3 avatar-xs">
                                    <img v-if="it.comment_type != 'Trend Observations' && it.comment_type != 'Requiring Special Attention' && it.comment_type != 'Missing Information'" src="{% static 'ui8-nazox/assets/images/flat-icons/file.png' %}" class="mr-3 avatar-xs">


                                    <p class="pb-2 pt-1 mb-1 border-bottom-light">
                                        [[it.comment_description]]</p>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-4 justify-content-center">
                    <button class="btn bg-parrot text-white " type="button" v-on:click="showSelReport('pl_notes','P_L_Result')">
                     CONTINUE TO PROFIT STATEMENT
                    </button>
                </div>
            </div>
        </div>
        <div class="row resultpane d-none" id="P_L_Result">

            <div class="col-xl-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="float-left" style="top:-10px;position:relative">
                                    <img src="{% static 'ui8-nazox/assets/images/flat-icons/line-chart-1.png' %}"
                                         class="mr-3 avatar-xs">
                                </div>
                                <h4 class="card-title mb-2">Profit & Loss Statement</h4>
                                <p class="mb-1 font-12px">[[today_mon_year]]</p>
                                <p class="mb-1 text-parrot text-right notes" id="pl_notes">Notes</p>
                            </div>

                        </div>

                        <hr class="bg-light"/>
                        <div id="donut-chart" class="apex-charts"></div>
                        <div v-if="!pl_loaded"><p class="text-center">No Data Found</p></div>
                        <div v-if="pl_loaded">
                            <div class="row">
                                <div class="col-6">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> [[pl_data.results.Page2.table1.records[3].Col1]]</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pl_data.results.Page2.table1.records[3].Col4 | toCurrency]]</p>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-success font-size-10 mr-1"></i>[[pl_data.results.Page2.table1.records[12].Col1]]</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pl_data.results.Page2.table1.records[12].Col4 | toCurrency]]</p>
                                    </div>
                                </div>
                                <div class="col-6 offset-3">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-warning font-size-10 mr-1"></i> [[pl_data.results.Page2.table1.records[14].Col1]]</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pl_data.results.Page2.table1.records[14].Col4 | toCurrency]]</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="card-body pr-0 pl-0">
                                        <!--                                    <h4 class="card-title">Accordion example</h4>-->
                                        <!--                                    <p class="card-title-desc">Extend the default collapse behavior to create an accordion.</p>-->
                                        <div id="accordion" class="custom-accordion">
                                            <div class="card mb-1 shadow-none">
                                                <div class="card-header pl-0 pr-0 collapsed" id="headingOne" class="text-dark" data-target="#IncomeOne" data-toggle="collapse">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[pl_data.results.Page2.table1.records[3].Col1]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ pl_data.results.Page2.table1.records[3].Col4 | toCurrency]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="IncomeOne" class="collapse" aria-labelledby="headingtwo" >
                                                    <div class="card m-2  rounded">
                                                        <div class="card-header " id="headingTwo" data-toggle="collapse" data-target="#TotalSales" aria-expanded="true" aria-controls="TotalIncome">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                    <p class="mb-0 text-white" style="font-size: 12px;">[[ pl_data.results.Page2.table1.records[0].Col1]]</p>
                                                                    <hr class="bg-white m-1"/>
                                                                    <p class="mb-0 text-white" style="font-size: 12px;">&#8377 [[ pl_data.results.Page2.table1.records[0].Col4 | toCurrency]]</p>
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">[[ pl_data.results.Page2.table1.records[0].Col4 | toPercent(pl_data.results.Page2.table1.records[3].Col4) ]] %</p>
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">of total income</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="TotalSales" class="collapse" aria-labelledby="headingOne" >
                                                            <canvas id="salesChart" class=" ml-auto mr-auto " style="max-height:700px!important;max-width:100%!important;" height="400"></canvas>
                                                            <div v-for="(item,index) in salesinfo" class="row border-bottom border-light mr-0 ml-0 pb-2 pt-2 ">
                                                                <div class="col-4">
                                                                    <p class="mb-0" style="font-size: 12px;">[[item.Col1]]</p>
                                                                </div>
                                                                <div class="col-7 text-right">
                                                                    <div class="row">
                                                                        <div class="col-2 text-right">
                                                                            <div class="dot" v-bind:style="{ backgroundColor: salescolors[index]}"></div>
                                                                        </div>
                                                                        <div class="col-9  text-left">
                                                                            <p class="mb-0" style="font-size: 12px;">&#8377 [[ item.Col3 | toCurrency]]</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-header rounded mb-0" id="headingThree" data-toggle="collapse" data-target="#OtherSales" aria-expanded="true" aria-controls="TotalIncome" >
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left" >
                                                                    <p class="mb-0 text-white" style="font-size: 12px;">[[ pl_data.results.Page2.table1.records[1].Col1]]</p>
                                                                    <hr class="bg-white m-1"/>
                                                                    <p class="mb-0 text-white" style="font-size: 12px;">&#8377 [[ pl_data.results.Page2.table1.records[1].Col4 | toCurrency]]</p>
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">[[ pl_data.results.Page2.table1.records[1].Col4 | toPercent(pl_data.results.Page2.table1.records[3].Col4) ]] % </p>
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">of total Income</p>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div id="OtherSales" class="collapse" aria-labelledby="headingOne" data-parent="#TotalIncome">
                                                            <div v-for="item in othersalesinfo"class="row border-bottom border-light mr-0 ml-0 pb-2 pt-2 ">
                                                                <div class="col-6  pt-2 ">
                                                                    <p class="mb-0" style="font-size: 12px;">[[item.Col1]]</p>
                                                                </div>
                                                                <div class="col-6 text-left">
                                                                    <p class="mb-0" style="font-size: 12px;">&#8377 [[ item.Col3 | toCurrency]]</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-header pl-0 pr-0 collapsed" id="headingFive" data-toggle="collapse" data-target="#ExpensesOne" aria-expanded="true" aria-controls="TotalIncome">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[pl_data.results.Page2.table1.records[12].Col1]]</h6>
                                                        </div>
                                                        <div class="col-4  pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ pl_data.results.Page2.table1.records[12].Col4 | toCurrency]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="ExpensesOne" class="collapse" aria-labelledby="headingtwo" >
                                                    <div class="card border border-light m-2 rounded">
                                                        <div v-for="(it,index) in pl_data_detail">
                                                            <div class="card-header " id="headingFoodCost" data-toggle="collapse"  :data-target="'#subitem'+String(index)" aria-expanded="true" aria-controls="TotalIncome">
                                                                <div class="row">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white" style="font-size: 12px;">[[ it.name ]]</p>
                                                                        <hr class="bg-white m-1"/>
                                                                        <p class="mb-0 text-white" style="font-size: 12px;">&#8377 [[ it.total | toCurrency]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;">[[ it.total | toPercent(pl_data.results.Page2.table1.records[3].Col4) ]] %</p>
                                                                        <p class="mb-0 text-white" style="font-size: 10px;">of total expense</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div :id="'subitem'+String(index)" class="collapse" aria-labelledby="headingOne" >
                                                                <div class="row border-bottom border-light mr-0 ml-0 pb-2 pt-2" v-for="item in it.records">
                                                                    <div class="col-6 pl-md-5 pl-md-3 col-md-8">
                                                                        <p class="mb-0" style="font-size: 12px;"> [[ item.Col1 ]]</p>
                                                                    </div>
                                                                    <div class="col-6 col-md-4 text-left">
                                                                        <p class="mb-0" style="font-size: 12px;">&#8377 [[ item.Col3 | toCurrency ]]</p>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row resultpane d-none"  id="GST_Result">
            <div class="col-xl-12">
                <div class="card">

                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="float-left" style="top:-10px;position:relative">
                                    <img src="{% static 'ui8-nazox/assets/images/flat-icons/payout-2.png' %}"
                                         class="mr-3 avatar-xs">
                                </div>
                                <h4 class="card-title mb-2">GST Statement</h4>
                                <p class="mb-1 font-12px">[[today_mon_year]]</p>
                            </div>

                        </div>

                        <hr class="bg-light"/>
                        <div v-if="!gst_loaded"><p class="text-center">No Data Found</p></div>
                        <div v-if="gst_loaded">
                            <div class="row justify-content-center">
                                <div class="col-6">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> Net GST Payable</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[gst_data.net_gst_payable | toCurrency]]</p>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-12">
                                    <div class="card-body pr-0 pl-0">
                                        <div id="accordiongst" class="custom-accordion">
                                            <div class="card mb-1 shadow-none">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingB2C" data-toggle="collapse" data-target="#B2C" >
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>B2C Sales (To Direct Customers) </h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ gst_data.b2c_total | toCurrency]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="B2C" class="collapse" aria-labelledby="headingtwo" data-parent="#accordiongst">
                                                    <div class="card m-2  rounded">
                                                        <div class="card-header" v-for="item in gst_data.b2c">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">[[item.name]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ item.total_gst | toCurrency]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingB2B" data-toggle="collapse" data-target="#B2B">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>B2B (To Business)</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ gst_data.b2b_total | toCurrency]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="B2B" class="collapse" aria-labelledby="headingtwo" data-parent="#accordiongst">
                                                    <div class="card m-2  rounded">
                                                        <div class="card-header" v-for="item in gst_data.b2b">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">[[item.name]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ item.total_gst | toCurrency ]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headinginputtaxcredit" data-toggle="collapse" data-target="#ITC" >
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>Input Tax Credit</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[gst_data.input_tax_credit]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="ITC" class="collapse" aria-labelledby="headingtwo" data-parent="#accordiongst">
                                                    <div class="card m-2  rounded">
                                                        <div class="card-header">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">RCM</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[gst_data.rcm | toCurrency]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-header" >
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Input Tax Credit</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[gst_data.input_tax_credit | toCurrency]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingmisc" data-toggle="collapse" data-target="#MISC">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>Interest & Penalty</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[gst_data.interest + gst_data.late_payment_fees | toCurrency]]</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="MISC" class="collapse" aria-labelledby="headingtwo" data-parent="#accordiongst">
                                                    <div class="card m-2  rounded">
                                                        <div class="card-header">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Interest</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ gst_data.interest | toCurrency ]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="card-header">
                                                            <div class="row">
                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">

                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Late Payment Fees</p>
                                                                    <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                </div>
                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">
                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ gst_data.late_payment_fees | toCurrency]]</p>
                                                                    <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--                    <div class="dashboard container"  style="margin-top:80px">-->


                <!--                        <div class="accordion" id="accordion1">-->
                <!--                            <div class="row justify-content-md-center">-->

                <!--                                <div class="col-md-10" v-for="(list,index) in detailedDataList">-->
                <!--                                    <div class="card text-center text-black card-gray" >-->

                <!--                                        <div class="card-body">-->
                <!--                                            <div class="row">-->
                <!--                                                <div class="col no-padding text-left"><h6>[[list.name]]</h6></div>-->
                <!--                                                <div class="col no-padding text-right"> <h6><span class="rupee"></span> [[list.value | toCurrency]]</h6></div>-->
                <!--                                            </div>-->

                <!--                                            <div class="row sub-data-card" v-for="(sublist,index1) in list.subData">-->

                <!--                                                <div class="col-md-9 col-9 padding5px" v-bind:class="[isActive===index+''+index1 && isCollapse===index+''+index1+'true'? 'active' : '']">-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6 class="text-capitalize">[[sublist.name]]</h6></div>-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6><span class="rupee"></span> [[sublist.value | toCurrency]]</h6></div>-->
                <!--                                                </div>-->

                <!--                                                <div class="col-md-3 col-3 card-green padding5px" v-on:click="toggleClass(index,index1,sublist)" data-toggle="collapse" :data-target="'#'+sublist.type+index+index1">-->
                <!--                                                    <span class="font10px font-weight-bold">[[sublist.percentage]]</span><br>-->
                <!--                                                    <span class="font10px">of Income</span>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'graph'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='graph'">-->

                <!--                                                    <canvas id="myChart" class="mt-4 mb-4" style="max-height:300px;max-width: 600px !important;"></canvas>-->
                <!--                                                    <div class="row " v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="col text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                        <div class="col text-left display-flex"> <span class="legend" v-bind:style="{ backgroundColor: colorlist[index2]}"></span> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'list'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='list'">-->
                <!--                                                    <div class="mt-2" v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                    <div class="mt-2" v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="row">-->
                <!--                                                            <div class="col-md-7 col-7 text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                            <div class="col-md-5 col-5  text-left "> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                        </div><hr>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                            </div>-->
                <!--                                        </div>-->
                <!--                                    </div>-->
                <!--                                </div>-->
                <!--                            </div>-->
                <!--                        </div>-->

                <!--                    </div>-->


            </div>
        </div>
        <div class="row resultpane d-none" id="Con_Result" >
            <div class="col-xl-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="float-left" style="top:-10px;position:relative">
                                    <img src="{% static 'ui8-nazox/assets/images/flat-icons/analytics.png' %}"
                                         class="mr-3 avatar-xs">
                                </div>
                                <h4 class="card-title mb-2">Consumption Analysis Statement</h4>
                                <p class="mb-1 font-12px">[[today_mon_year]]</p>
                            </div>

                        </div>
                        <hr class="bg-light"/>
                        <div v-if="!ca_loaded"><p class="text-center">No Data Found</p></div>
                        <div v-if="ca_loaded">
                            <div class="row justify-content-start">
                                <div class="col-10">
                                    <div class="ml-2 mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> Consumption in Value</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[ca_data.results.totalConsumption | toCurrency]]</p>
                                    </div>
                                </div>
                                <div class="col-10">
                                    <div class="ml-2 mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> % of consumption to total sales</p>
                                        <p class="mb-2 " style="font-size:12px;">[[ca_data.results.totalPerConsumption]] % </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row justify-content-start mb-3">
                                <div class="col-12 ml-2 mt-4">
                                    <p class="text-muted mb-0" for="input-sex">Consumption Type</p>
                                </div>
                                <div class="col-12 ml-2">
                                    <a href="#" id="change-con-type" data-type="select" data-pk="1" data-value="" data-title="Select Change in Consumption"></a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div id="Consumption" class="custom-accordion consumption-dtl" >
                                        <h4 class="card-title font-weight-bold mb-2">Consumption Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.consumptionTable">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingOneCa" data-toggle="collapse" :data-target="'#Item'+index" >
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ it.ItemSummary.consumption | toCurrency ]] </p>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'Item'+index" class="collapse" aria-labelledby="headingtwoCa" data-parent="#Consumption">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                        <!--                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>-->
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;"> [[itSub.value | toString ]]</p>
                                                                        <!--                                                                <h5 class="mb-0 text-dark">of total income</h5>-->
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-12 pl-1 pr-1 pl-md-2 pr-md-1" >
                                    <div class="custom-accordion consumption-dtl" id="ChangeinConsumptionByValue" >
                                        <h4 class="card-title font-weight-bold mb-2">Change in Consumption (By Value) Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.ChangeinConsumptionByValue">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" :id="'#ChangeConsumptionByValHead'+index"  data-toggle="collapse" :data-target="'#ChangeConsumptionByVal'+index" >
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">[[ it.ItemSummary.consumptionVariation]] % </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'ChangeConsumptionByVal'+index" class="collapse" data-parent="#ChangeinConsumptionByValue">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white text-capitalize" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;">&#8377  [[itSub.value | toCurrency ]]</p>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-12 pl-1 pr-1 pl-md-2 pr-md-1" >
                                    <div class="custom-accordion consumption-dtl" id="ChangeinConsumptionByQuantity" >
                                        <h4 class="card-title font-weight-bold mb-2">Change in Consumption (By Quantity) Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.ChangeinConsumptionByQuantity">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" :id="'#ChangeConsumptionByQtyHead'+index"  data-toggle="collapse" :data-target="'#ChangeConsumptionByQty'+index">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">[[ it.ItemSummary.consumptionVariation]] % </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'ChangeConsumptionByQty'+index" class="collapse" data-parent="#ChangeinConsumptionByQuantity">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white text-capitalize" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;"> [[itSub.value | toString ]] [[it.ItemSummary.ItemName | getUOM]] </p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-12 pl-1 pr-1 pl-md-2 pr-md-1" >
                                    <div class="custom-accordion consumption-dtl" id="ChangeinConsumptionByofsales" >
                                        <h4 class="card-title font-weight-bold mb-2">Change in Consumption (By % of sales) Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.ChangeinConsumptionByofsales">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" :id="'#ChangeConsumptionBySalesHead'+index"  data-toggle="collapse" :data-target="'#ChangeConsumptionBySales'+index">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">[[ it.ItemSummary.consumptionVariation]] % </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'ChangeConsumptionBySales'+index" class="collapse" data-parent="#ChangeinConsumptionByofsales">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white text-capitalize" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;"> [[itSub.value | toString ]] %</p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-12 pl-1 pr-1 pl-md-2 pr-md-1" >
                                    <div class="custom-accordion consumption-dtl" id="ChangeinPricescomparedtopreviousmonths" >
                                        <h4 class="card-title font-weight-bold mb-2">Change in Prices (compared to previous months) Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.ChangeinPricescomparedtopreviousmonths">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" :id="'#ChangeinPricesPrevMonHead'+index"  data-toggle="collapse" :data-target="'#ChangeinPricesPrevMon'+index">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">[[ it.ItemSummary.PriceVariation]] % </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'ChangeinPricesPrevMon'+index" class="collapse" data-parent="#ChangeinPricescomparedtopreviousmonths">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white text-capitalize" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[itSub.value | toCurrency ]]</p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-12 pl-1 pr-1 pl-md-2 pr-md-1" >
                                    <div class="custom-accordion consumption-dtl" id="ChangeinPricesComparisionwithinthemonth" >
                                        <h4 class="card-title font-weight-bold mb-2">Change in Prices (comparision within the month) Summary</h4>
                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in ca_data.results.ChangeinPricesComparisionwithinthemonth">
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" :id="'#ChangeinPricesWithinMonHead'+index"  data-toggle="collapse" :data-target="'#ChangeinPricesWithinMon'+index">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemSummary.ItemName ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white" style="font-size: 10px;">[[ it.ItemSummary.PriceFluctuation]] % </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div :id="'ChangeinPricesWithinMon'+index" class="collapse" data-parent="#ChangeinPricesComparisionwithinthemonth">
                                                    <div class="card m-2  rounded">
                                                        <div v-for="(itSub,index) in it.detailedList">
                                                            <div class="card-header" >
                                                                <div class="row  ml-0 mr-0 ">
                                                                    <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">
                                                                        <p class="mb-0 text-white text-capitalize" style="font-size: 12px;">[[itSub.Name]]</p>
                                                                    </div>
                                                                    <div class="col-4 pt-2 pb-2 rounded-right  bg-parrot">
                                                                        <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[itSub.value | toCurrency ]]</p>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>



                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                    </div>
                </div>

                <!--                    <div class="dashboard container"  style="margin-top:80px">-->


                <!--                        <div class="accordion" id="accordion1">-->
                <!--                            <div class="row justify-content-md-center">-->

                <!--                                <div class="col-md-10" v-for="(list,index) in detailedDataList">-->
                <!--                                    <div class="card text-center text-black card-gray" >-->

                <!--                                        <div class="card-body">-->
                <!--                                            <div class="row">-->
                <!--                                                <div class="col no-padding text-left"><h6>[[list.name]]</h6></div>-->
                <!--                                                <div class="col no-padding text-right"> <h6><span class="rupee"></span> [[list.value | toCurrency]]</h6></div>-->
                <!--                                            </div>-->

                <!--                                            <div class="row sub-data-card" v-for="(sublist,index1) in list.subData">-->

                <!--                                                <div class="col-md-9 col-9 padding5px" v-bind:class="[isActive===index+''+index1 && isCollapse===index+''+index1+'true'? 'active' : '']">-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6 class="text-capitalize">[[sublist.name]]</h6></div>-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6><span class="rupee"></span> [[sublist.value | toCurrency]]</h6></div>-->
                <!--                                                </div>-->

                <!--                                                <div class="col-md-3 col-3 card-green padding5px" v-on:click="toggleClass(index,index1,sublist)" data-toggle="collapse" :data-target="'#'+sublist.type+index+index1">-->
                <!--                                                    <span class="font10px font-weight-bold">[[sublist.percentage]]</span><br>-->
                <!--                                                    <span class="font10px">of Income</span>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'graph'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='graph'">-->

                <!--                                                    <canvas id="myChart" class="mt-4 mb-4" style="max-height:300px;max-width: 600px !important;"></canvas>-->
                <!--                                                    <div class="row " v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="col text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                        <div class="col text-left display-flex"> <span class="legend" v-bind:style="{ backgroundColor: colorlist[index2]}"></span> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'list'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='list'">-->
                <!--                                                    <div class="mt-2" v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="row">-->
                <!--                                                            <div class="col-md-7 col-7 text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                            <div class="col-md-5 col-5  text-left "> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                        </div><hr>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                            </div>-->
                <!--                                        </div>-->
                <!--                                    </div>-->
                <!--                                </div>-->
                <!--                            </div>-->
                <!--                        </div>-->

                <!--                    </div>-->


            </div>
        </div>
        <div class="row resultpane d-none" id="Sales_Result">
            <div class="col-xl-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="float-left" style="top:-10px;position:relative">
                                    <img src="{% static 'ui8-nazox/assets/images/flat-icons/analytics.png' %}"
                                         class="mr-3 avatar-xs">
                                </div>
                                <h4 class="card-title mb-2">Sales Channel Reconciliation</h4>
                                <p class="mb-1 font-12px">[[today_mon_year]]</p>
                            </div>

                        </div>
                        <hr class="bg-light"/>
                        <div v-if="!scr_loaded"><p class="text-center">No Data Found</p></div>
                        <div v-if="scr_loaded">
                            <div class="row justify-content-start">
                                <div class="col-12">

                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> Sales Platform Gross Sale Difference</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377  [[scr_data.results.salesPlatformGrossDiff | toCurrency]]</p>
                                    </div>
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> Sales Platform Value Difference</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377  [[scr_data.results.salesPlatformDiff | toCurrency]]</p>
                                    </div>

                                </div>

                            </div>
                            <div class="row mt-2 mb-2">
                                <div class="col-12">
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Total-btn" type="button" v-on:click="showSalesData('Total')" >Total</button>
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Swiggy-btn" type="button" v-on:click="showSalesData('Swiggy')" >Swiggy</button>
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Zomato-btn" type="button" v-on:click="showSalesData('Zomato')">Zomato</button>
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Dunzo-btn" type="button" v-on:click="showSalesData('Dunzo')">Dunzo</button>
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Nearbuy-btn" type="button" v-on:click="showSalesData('Nearbuy')">Nearbuy</button>
                                    <button class="btn btn-light mt-1 mb-1 sales-btn Dineout-btn" type="button" v-on:click="showSalesData('Dineout')">Dineout</button>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div id="dropdownsummaryscr" class="custom-accordion" >
                                        <h4 class="card-title font-weight-bold mb-2">Sales Platform</h4>

                                        <div class="card mb-1 shadow-none">
                                            <div v-for="(it,index) in scr_data.results.ItemSummary">
                                                <div class="card-header pl-0 pr-0 text-dark"  >
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-8 pt-2 pb-2">
                                                            <h6 class="mb-0 ">[[ it.Particulars ]]</h6>
                                                        </div>
                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">
                                                            <p class="mb-0 text-white sales-data Total" style="font-size: 10px;">&#8377  [[ it.Total | toCurrency]] </p>
                                                            <p class="mb-0 text-white sales-data Swiggy" style="font-size: 10px;">&#8377  [[ it.Swiggy | toCurrency]] </p>
                                                            <p class="mb-0 text-white sales-data Zomato" style="font-size: 10px;">&#8377  [[ it.Zomato | toCurrency]] </p>
                                                            <p class="mb-0 text-white sales-data Dunzo" style="font-size: 10px;">&#8377  [[ it.Dunzo | toCurrency]] </p>
                                                            <p class="mb-0 text-white sales-data Nearbuy" style="font-size: 10px;">&#8377  [[ it.Nearbuy | toCurrency]] </p>
                                                            <p class="mb-0 text-white sales-data Dineout" style="font-size: 10px;">&#8377  [[ it.Dineout | toCurrency]] </p>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <button class="btn btn-danger mt-2 mb-2 pl-2 pr-2 period-data-btn" type="button" v-on:click="showPeriodData()">View Period-wise details information</button>
                                            </div>
                                            <div class="period-table" id="Swiggy-table">
                                                <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th>Particulars</th>
                                                                                <th>Total</th>
                                                                                <template v-for="(it,index) in scr_data.results.swiggy_reco[0].details">
                                                                                    <th>[[it.key]]</th>
                                                                                </template>

                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template v-for="(it,index) in scr_data.results.swiggy_reco">
                                                                                <tr v-if="it.fields.Particulars">
                                                                                    <td>
                                                                                        <template v-if="swiggyHeadParticulars.includes(it.fields.Particulars)"><b style="color:#32383e;">[[it.fields.Particulars]]</b></template>
                                                                                        <template v-else>[[it.fields.Particulars]]</template>
                                                                                    </td>
                                                                                    <td>[[it.fields.total | toCurrency]]</td>
                                                                                    <template v-for="(it1,index) in it.details">
                                                                                        <td>[[it1.value | toCurrency]]</td>
                                                                                    </template>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>

                                            </div>
                                            <div class="period-table" id="Zomato-table">
                                                <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th>Particulars</th>
                                                                                <th>Total</th>
                                                                                <template v-for="(it,index) in scr_data.results.zomato_reco[0].details">
                                                                                    <th>[[it.key]]</th>
                                                                                </template>

                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template v-for="(it,index) in scr_data.results.zomato_reco">
                                                                                <tr v-if="it.fields.Particulars">
                                                                                    <td>
                                                                                        <template v-if="zomatoHeadParticulars.includes(it.fields.Particulars)"><b style="color:#32383e;">[[it.fields.Particulars]]</b></template>
                                                                                        <template v-else>[[it.fields.Particulars]]</template>
                                                                                    </td>
                                                                                    <td>[[it.fields.total | toCurrency]]</td>
                                                                                    <template v-for="(it1,index) in it.details">
                                                                                        <td>[[it1.value | toCurrency]]</td>
                                                                                    </template>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>

                                            </div>
                                            <div class="period-table" id="Dunzo-table">
                                                <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th>Particulars</th>
                                                                                <th>Total</th>
                                                                                <template v-for="(it,index) in scr_data.results.dunzo_reco[0].details">
                                                                                    <th>[[it.key]]</th>
                                                                                </template>

                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template v-for="(it,index) in scr_data.results.dunzo_reco">
                                                                                <tr v-if="it.fields.Particulars">
                                                                                    <td>
                                                                                        <template v-if="dunzoHeadParticulars.includes(it.fields.Particulars)"><b style="color:#32383e;">[[it.fields.Particulars]]</b></template>
                                                                                        <template v-else>[[it.fields.Particulars]]</template>
                                                                                    </td>
                                                                                    <td>[[it.fields.total | toCurrency]]</td>
                                                                                    <template v-for="(it1,index) in it.details">
                                                                                        <td>[[it1.value | toCurrency]]</td>
                                                                                    </template>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>

                                            </div>
                                            <div class="period-table" id="Nearbuy-table">
                                                <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th>Particulars</th>
                                                                                <th>Total</th>
                                                                                <template v-for="(it,index) in scr_data.results.nearbuy_reco[0].details">
                                                                                    <th>[[it.key]]</th>
                                                                                </template>

                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template v-for="(it,index) in scr_data.results.nearbuy_reco">
                                                                                <tr v-if="it.fields.Particulars">
                                                                                    <td>
                                                                                        <template v-if="nearbuyHeadParticulars.includes(it.fields.Particulars)"><b style="color:#32383e;">[[it.fields.Particulars]]</b></template>
                                                                                        <template v-else>[[it.fields.Particulars]]</template>
                                                                                    </td>
                                                                                    <td>[[it.fields.total | toCurrency]]</td>
                                                                                    <template v-for="(it1,index) in it.details">
                                                                                        <td>[[it1.value | toCurrency]]</td>
                                                                                    </template>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>

                                            </div>
                                            <div class="period-table" id="Dineout-table">
                                                <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th>Particulars</th>
                                                                                <th>Total</th>
                                                                                <template v-for="(it,index) in scr_data.results.dineout_reco[0].details">
                                                                                    <th>[[it.key]]</th>
                                                                                </template>

                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <template v-for="(it,index) in scr_data.results.dineout_reco">
                                                                                <tr v-if="it.fields.Particulars">
                                                                                    <td>
                                                                                        <template v-if="dineoutHeadParticulars.includes(it.fields.Particulars)"><b style="color:#32383e;">[[it.fields.Particulars]]</b></template>
                                                                                        <template v-else>[[it.fields.Particulars]]</template>
                                                                                    </td>
                                                                                    <td>[[it.fields.total | toCurrency]]</td>
                                                                                    <template v-for="(it1,index) in it.details">
                                                                                        <td>[[it1.value | toCurrency]]</td>
                                                                                    </template>
                                                                                </tr>
                                                                            </template>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                </div>

                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!--                    <div class="dashboard container"  style="margin-top:80px">-->


                <!--                        <div class="accordion" id="accordion1">-->
                <!--                            <div class="row justify-content-md-center">-->

                <!--                                <div class="col-md-10" v-for="(list,index) in detailedDataList">-->
                <!--                                    <div class="card text-center text-black card-gray" >-->

                <!--                                        <div class="card-body">-->
                <!--                                            <div class="row">-->
                <!--                                                <div class="col no-padding text-left"><h6>[[list.name]]</h6></div>-->
                <!--                                                <div class="col no-padding text-right"> <h6><span class="rupee"></span> [[list.value | toCurrency]]</h6></div>-->
                <!--                                            </div>-->

                <!--                                            <div class="row sub-data-card" v-for="(sublist,index1) in list.subData">-->

                <!--                                                <div class="col-md-9 col-9 padding5px" v-bind:class="[isActive===index+''+index1 && isCollapse===index+''+index1+'true'? 'active' : '']">-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6 class="text-capitalize">[[sublist.name]]</h6></div>-->
                <!--                                                    <div class="col-12 no-padding text-left"><h6><span class="rupee"></span> [[sublist.value | toCurrency]]</h6></div>-->
                <!--                                                </div>-->

                <!--                                                <div class="col-md-3 col-3 card-green padding5px" v-on:click="toggleClass(index,index1,sublist)" data-toggle="collapse" :data-target="'#'+sublist.type+index+index1">-->
                <!--                                                    <span class="font10px font-weight-bold">[[sublist.percentage]]</span><br>-->
                <!--                                                    <span class="font10px">of Income</span>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'graph'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='graph'">-->

                <!--                                                    <canvas id="myChart" class="mt-4 mb-4" style="max-height:300px;max-width: 600px !important;"></canvas>-->
                <!--                                                    <div class="row " v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="col text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                        <div class="col text-left display-flex"> <span class="legend" v-bind:style="{ backgroundColor: colorlist[index2]}"></span> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                                <div :id="'list'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='list'">-->
                <!--                                                    <div class="mt-2" v-for="(subDetaillist,index2) in sublist.subDetailData">-->
                <!--                                                        <div class="row">-->
                <!--                                                            <div class="col-md-7 col-7 text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
                <!--                                                            <div class="col-md-5 col-5  text-left "> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
                <!--                                                        </div><hr>-->
                <!--                                                    </div>-->
                <!--                                                </div>-->
                <!--                                            </div>-->
                <!--                                        </div>-->
                <!--                                    </div>-->
                <!--                                </div>-->
                <!--                            </div>-->
                <!--                        </div>-->

                <!--                    </div>-->


            </div>
        </div>
        <div class="row resultpane d-none" id="PE_Result">
            <div class="col-xl-12">
                <div class="card">

                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="float-left" style="top:-10px;position:relative">
                                    <img src="{% static 'ui8-nazox/assets/images/flat-icons/money-box.png' %}"
                                         class="mr-3 avatar-xs">
                                </div>
                                <h4 class="card-title mb-2">Purchase Efficiency Statement</h4>
                                <p class="mb-1 font-12px">[[today_mon_year]]</p>
                            </div>

                        </div>

                        <hr class="bg-light"/>
                        <div v-if="!pe_loaded"><p class="text-center">No Data Found</p></div>
                        <div v-if="pe_loaded">
                            <div class="row justify-content-center">
                                <div class="col-10">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-primary font-size-10 mr-1"></i> Actual Purchasing Cost</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pe_data.results.summary.ActualPurchasingCost | toCurrency]]</p>
                                    </div>
                                </div>

                                <div class="col-10">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-success font-size-10 mr-1"></i> Ideal Purchasing Cost</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pe_data.results.summary.IdealPurchasingCost | toCurrency]]</p>
                                    </div>

                                </div>


                                <div class="col-10">
                                    <div class="text-center mt-4">
                                        <p class="mb-2 "><i class="mdi mdi-circle text-danger font-size-10 mr-1"></i> Purchase Efficiency Loss</p>
                                        <p class="mb-2 " style="font-size:12px;">&#8377 [[pe_data.results.summary.EfficiencyLoss | toCurrency]]</p>
                                    </div>

                                </div>

                            </div>
                            <div class="row">
                                <div class="col-12">
                                                                        <div id="dropdownsummarype" class="custom-accordion" >
                                        <div class="card mb-1 shadow-none">
                                            <div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingOne1" data-toggle="collapse" data-target="#itemSummaryTable">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-12 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>Item Summary</h6>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div id="itemSummaryTable" class="collapse" aria-labelledby="headingtwo" data-parent="#dropdownsummarype">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th scope="col">#</th>
                                                                                <th scope="col">Item Name</th>
                                                                                <th scope="col">Total Quantity Purchased</th>
                                                                                <th scope="col">Avg Price of all Purchases</th>
                                                                                <th scope="col">Least Price of Purchases</th>
                                                                                <th scope="col">Actual Purchasing Cost</th>
                                                                                <th scope="col">Ideal Purchasing Cost</th>
                                                                                <th scope="col">Efficiency Loss</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody class="list custom-accordion" id="accordion1">
                                                                        <template v-for="(it,index) in pe_data.results.itemsummaryTable">
                                                                            <tr>
                                                                                <td  class="collapsed" data-toggle="collapse" :data-target="'#detail-item-'+index" aria-expanded="false"><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i></td>
                                                                                <td>[[ it.ItemName ]]</td>
                                                                                <td>[[it.Quantity]]</td>
                                                                                <td>&#8377 [[it.PurchasePrice | toCurrency]]</td>
                                                                                <td>&#8377 [[it.IdealPrice | toCurrency]]</td>
                                                                                <td>&#8377 [[it.ActualPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.IdealPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.EfficiencyLoss | toCurrency]]</td>
                                                                            </tr>
                                                                            <tr class="collapse" :id="'detail-item-'+index" data-parent="#accordion1" >
                                                                                <td colspan="7">
                                                                                    <table class="table align-items-center">
                                                                                        <thead class="thead-light">
                                                                                            <tr>
                                                                                                <th scope="col" class="sort" data-sort="date">Date</th>
                                                                                                <th scope="col" class="sort" data-sort="vendor">Vendor</th>
                                                                                                <th scope="col" >Bill No.</th>
                                                                                                <th scope="col">ItemName</th>
                                                                                                <th scope="col" >Quantity</th>
                                                                                                <th scope="col">IdealPrice</th>
                                                                                                <th scope="col">PurchasePrice</th>
                                                                                                <th scope="col">EfficiencyLoss</th>
                                                                                                <th scope="col">ExtraPricePaid</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody class="list">
                                                                                            <tr v-for="item in  pe_data.detailedlist[index]">
                                                                                                <th scope="row">
                                                                                                    [[item.Date]]
                                                                                                </th>
                                                                                                <td class="vendor">
                                                                                                    [[item.Vendor]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.Vendor]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.ItemName]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.Quantity]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.IdealPrice]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.PurchasePrice]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.EfficiencyLoss]]
                                                                                                </td>
                                                                                                <td>
                                                                                                    [[item.ExtraPricePaid]]
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </td>

                                                                            </tr>
                                                                        </template>

                                                                        </tbody>

                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>



                                        </div>
                                        <div class="card mb-1 shadow-none">
                                            <div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingOne1" data-toggle="collapse" data-target="#vendorSummaryTable">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-12 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>Vendor Summary</h6>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div id="vendorSummaryTable" class="collapse" aria-labelledby="headingtwo" data-parent="#dropdownsummarype">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th scope="col" class="sort" data-sort="vendor">Vendor</th>
                                                                                <th scope="col">Actual Purchasing Cost</th>
                                                                                <th scope="col">Ideal Purchasing Cost</th>
                                                                                <th scope="col">Efficiency Loss</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody class="list">
                                                                            <tr v-for="(it,index) in pe_data.results.vendorsummaryTable">
                                                                                <td class="vendor" >[[ it.Vendor ]]</td>
                                                                                <td>&#8377 [[it.ActualPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.IdealPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.EfficiencyLoss | toCurrency]]</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>



                                        </div>
                                        <div class="card mb-1 shadow-none">
                                            <div>
                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingOne1" data-toggle="collapse" data-target="#dateSummaryTable">
                                                    <div class="row ml-0 mr-0" >
                                                        <div class="col-12 pt-2 pb-2">
                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>Date Summary</h6>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div id="dateSummaryTable" class="collapse" aria-labelledby="headingtwo" data-parent="#dropdownsummarype">
                                                    <div class="row ml-0 mr-0">
                                                        <div class="col-lg-12 col-md-12 col-12 pl-2 pr-2 pt-4 pb-4 rounded-left">
                                                            <div class="table-responsive">
                                                                <div>
                                                                    <table class="table align-items-center">
                                                                        <thead class="thead-light">
                                                                            <tr>
                                                                                <th scope="col" class="sort" data-sort="date">Date</th>
                                                                                <th scope="col">Actual Purchasing Cost</th>
                                                                                <th scope="col">Ideal Purchasing Cost</th>
                                                                                <th scope="col">Efficiency Loss</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody class="list">
                                                                            <tr v-for="(it,index) in pe_data.results.datesummaryTable">
                                                                                <td class="date" >[[ it.Date ]]</td>
                                                                                <td>&#8377 [[it.ActualPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.IdealPurchasingCost | toCurrency]]</td>
                                                                                <td>&#8377 [[it.EfficiencyLoss | toCurrency]]</td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>



                                        </div>
                                    </div>


<!--                                    <div id="dropdownsummarype" class="custom-accordion" >-->
<!--                                        <div class="card mb-1 shadow-none">-->


<!--                                            <div v-for="(it,index) in pe_data.results.itemsummaryTable">-->
<!--                                                <div class="card-header pl-0 pr-0 text-dark collapsed" id="headingOne1" data-toggle="collapse" :data-target="'#'+it.ItemName">-->
<!--                                                    <div class="row ml-0 mr-0" >-->
<!--                                                        <div class="col-8 pt-2 pb-2">-->
<!--                                                            <h6 class="mb-0 "><i class="mdi mdi-minus float-left accor-plus-icon pr-2"></i>[[ it.ItemName ]]</h6>-->
<!--                                                        </div>-->
<!--                                                        <div class="col-4 pt-2 pb-2 text-right justify-content-end bg-parrot">-->
<!--                                                            <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[ it.EfficiencyLoss | toCurrency ]] </p>-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                                <div :id="it.ItemName" class="collapse" aria-labelledby="headingtwo" data-parent="#dropdownsummarype">-->
<!--                                                    <div class="card m-2  rounded">-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Total Quantity Purchased</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.Quantity]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Average Price of all Purchases</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.PurchasePrice | toCurrency]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Least Price of Purchases</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.IdealPrice | toCurrency]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Actual Purchasing Cost</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.ActualPurchasingCost | toCurrency]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Ideal Purchasing Cost</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.IdealPurchasingCost | toCurrency]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 bg-grey border-right-0 rounded-left">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 12px;">Efficiency Loss</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-white">&#8377 [[ itemvalue | toCurrency]]</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                                <div class="col-4 pt-2 pb-2 rounded-right text-right bg-parrot">-->
<!--                                                                    <p class="mb-0 text-white" style="font-size: 10px;">&#8377 [[it.EfficiencyLoss | toCurrency]]</p>-->
<!--                                                                    &lt;!&ndash;                                                                <h5 class="mb-0 text-dark">of total income</h5>&ndash;&gt;-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="card-header">-->
<!--                                                            <div class="row">-->
<!--                                                                <div class="col-8 pt-2 pb-2 border-right-0 rounded-left">-->
<!--                                                                    <button class="btn btn-danger" type="button" data-toggle="collapse" :data-target="'#detail-'+it.ItemName" aria-expanded="false" aria-controls="collapseExample">-->
<!--                                                                        Show Detail-->
<!--                                                                    </button>-->
<!--                                                                </div>-->
<!--                                                            </div>-->
<!--                                                        </div>-->
<!--                                                        <div class="collapse" :id="'detail-'+it.ItemName">-->

<!--                                                            <div class="row ml-0 mr-0">-->
<!--                                                                <div class="col-lg-12 col-md-12 col-12 pl-md-5 pt-4 pb-4 rounded-left">-->
<!--                                                                    <div class="table-responsive">-->
<!--                                                                        <div>-->
<!--                                                                            <table class="table align-items-center">-->
<!--                                                                                <thead class="thead-light">-->
<!--                                                                                <tr>-->
<!--                                                                                    <th scope="col" class="sort" data-sort="date">Date</th>-->
<!--                                                                                    <th scope="col" class="sort" data-sort="vendor">Vendor</th>-->
<!--                                                                                    <th scope="col" >Bill No.</th>-->
<!--                                                                                    <th scope="col">ItemName</th>-->
<!--                                                                                    <th scope="col" >Quantity</th>-->
<!--                                                                                    <th scope="col">IdealPrice</th>-->
<!--                                                                                    <th scope="col">PurchasePrice</th>-->
<!--                                                                                    <th scope="col">EfficiencyLoss</th>-->
<!--                                                                                    <th scope="col">ExtraPricePaid</th>-->
<!--                                                                                </tr>-->
<!--                                                                                </thead>-->
<!--                                                                                <tbody class="list">-->
<!--                                                                                <tr v-for="item in  pe_data.detailedlist[index]">-->
<!--                                                                                    <th scope="row">-->
<!--                                                                                        [[item.Date]]-->
<!--                                                                                    </th>-->
<!--                                                                                    <td class="vendor">-->
<!--                                                                                        [[item.Vendor]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.Vendor]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.ItemName]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.Quantity]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.IdealPrice]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.PurchasePrice]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.EfficiencyLoss]]-->
<!--                                                                                    </td>-->
<!--                                                                                    <td>-->
<!--                                                                                        [[item.ExtraPricePaid]]-->
<!--                                                                                    </td>-->
<!--                                                                                </tr>-->
<!--                                                                                </tbody>-->
<!--                                                                            </table>-->
<!--                                                                        </div>-->

<!--                                                                    </div>-->
<!--                                                                </div>-->

<!--                                                            </div>-->

<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </div>-->

<!--                                        </div>-->
<!--                                    </div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--                    <div class="dashboard container"  style="margin-top:80px">-->


            <!--                        <div class="accordion" id="accordion1">-->
            <!--                            <div class="row justify-content-md-center">-->

            <!--                                <div class="col-md-10" v-for="(list,index) in detailedDataList">-->
            <!--                                    <div class="card text-center text-black card-gray" >-->

            <!--                                        <div class="card-body">-->
            <!--                                            <div class="row">-->
            <!--                                                <div class="col no-padding text-left"><h6>[[list.name]]</h6></div>-->
            <!--                                                <div class="col no-padding text-right"> <h6><span class="rupee"></span> [[list.value | toCurrency]]</h6></div>-->
            <!--                                            </div>-->

            <!--                                            <div class="row sub-data-card" v-for="(sublist,index1) in list.subData">-->

            <!--                                                <div class="col-md-9 col-9 padding5px" v-bind:class="[isActive===index+''+index1 && isCollapse===index+''+index1+'true'? 'active' : '']">-->
            <!--                                                    <div class="col-12 no-padding text-left"><h6 class="text-capitalize">[[sublist.name]]</h6></div>-->
            <!--                                                    <div class="col-12 no-padding text-left"><h6><span class="rupee"></span> [[sublist.value | toCurrency]]</h6></div>-->
            <!--                                                </div>-->

            <!--                                                <div class="col-md-3 col-3 card-green padding5px" v-on:click="toggleClass(index,index1,sublist)" data-toggle="collapse" :data-target="'#'+sublist.type+index+index1">-->
            <!--                                                    <span class="font10px font-weight-bold">[[sublist.percentage]]</span><br>-->
            <!--                                                    <span class="font10px">of Income</span>-->
            <!--                                                </div>-->
            <!--                                                <div :id="'graph'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='graph'">-->

            <!--                                                    <canvas id="myChart" class="mt-4 mb-4" style="max-height:300px;max-width: 600px !important;"></canvas>-->
            <!--                                                    <div class="row " v-for="(subDetaillist,index2) in sublist.subDetailData">-->
            <!--                                                        <div class="col text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
            <!--                                                        <div class="col text-left display-flex"> <span class="legend" v-bind:style="{ backgroundColor: colorlist[index2]}"></span> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
            <!--                                                    </div>-->
            <!--                                                </div>-->
            <!--                                                <div :id="'list'+index+index1" class="col-md-12 col-12 collapse"  data-parent="#accordion1" v-if="sublist.type=='list'">-->
            <!--                                                    <div class="mt-2" v-for="(subDetaillist,index2) in sublist.subDetailData">-->
            <!--                                                        <div class="row">-->
            <!--                                                            <div class="col-md-7 col-7 text-left "><h6 class="text-capitalize font-weight-normal">[[subDetaillist.name]]</h6></div>-->
            <!--                                                            <div class="col-md-5 col-5  text-left "> <h6 class="font-weight-normal"><span class="rupee"></span>[[subDetaillist.value | toCurrency]]</h6></div>-->
            <!--                                                        </div><hr>-->
            <!--                                                    </div>-->
            <!--                                                </div>-->
            <!--                                            </div>-->
            <!--                                        </div>-->
            <!--                                    </div>-->
            <!--                                </div>-->
            <!--                            </div>-->
            <!--                        </div>-->

            <!--                    </div>-->


        </div>
    </div>
    <footer class="footer pt-0">
        <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6">
                <div class="copyright text-center text-lg-left text-muted">
                    &copy; 2019 <a href="https://www.firstcourse.in" class="font-weight-bold ml-1" target="_blank">FirstCourse</a>
                </div>
            </div>
            <div class="col-lg-6">
                <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                    <li class="nav-item">
                        <a href="https://www.firstcourse.in" class="nav-link" target="_blank">FirstCourse</a>
                    </li>
                    <li class="nav-item">
                        <a href="https://www.firstcourse.in/aboutus" class="nav-link" target="_blank">About Us</a>
                    </li>
                    <!--                                <li class="nav-item">-->
                    <!--                                    <a href="http://blog.creative-tim.com" class="nav-link" target="_blank">Blog</a>-->
                    <!--                                </li>-->
                    <!--                                <li class="nav-item">-->
                    <!--                                    <a href="https://www.creative-tim.com/license" class="nav-link" target="_blank">License</a>-->
                    <!--                                </li>-->
                </ul>
            </div>
        </div>
    </footer>
</div>
</div>
{% endblock %}

{% block extrascript %}
<script src="{% static 'js/insights.js' %}"></script>
<script src="{% static 'js/jquery.color.js' %}"></script>
<script src="{% static 'assets/js/jsonQ.min.js' %}"></script>
<script src="{% static 'ui8-nazox/assets/libs/moment/min/moment.min.js' %}"></script>
<script src="{% static 'ui8-nazox/assets/libs/bootstrap-editable/js/index.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@beta/dist/js.cookie.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"></script>-->
<script src ="https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.1/qs.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script src="https://unpkg.com/draggabilly@2/dist/draggabilly.pkgd.min.js"></script>
<script>
    // $('#dropdownsummary .collapse').collapse('show');

    const vueApp = new Vue({
        el: '#app',
        delimiters: ['[[', ']]'],
        data: {
            reporttype:'{{ reporttype }}',
            pl_data:'',
            gst_data:'',
            pe_data:'',
            ca_data:'',
            scr_data:'',
            monthsArr:[],
            myChart:null,
            colorlist:['rgb(0,174,237)','rgb(14,49,117)','rgb(0,191,142)','rgb(255,123,0)','rgb(218,34,24)'],
            isActive: "",
            isCollapse:"",
            current_result:'',
            custid:0,
            userinfo:[],
            results:'',
            saleschart:null,
            ismobile:false,
            query_date:'',
            salesvalues:[],
            saleslabels:[],
            salescolors:[],
            today_mon_year:'',
            sel_report:'',
            query_month:'',
            query_year:'',
            month:'{{month}}',
            year:'{{year}}',
            query_type:'',
            pl_loaded:false,
            gst_loaded:false,
            pe_loaded:false,
            ca_loaded:false,
            scr_loaded:false,
            salesDataType:'',
            swiggyHeadParticulars:[],
            zomatoHeadParticulars:[],
            dunzoHeadParticulars:[],
            nearbuyHeadParticulars:[],
            dineoutHeadParticulars:[],

            plotdata: [{
                values: [19, 26, 55],
                labels: ['Residential', 'Non-Residential', 'Utility'],
                type: 'pie',
                textinfo: "label+percent",
                textposition: "outside",
            }],
            colors:[
                "#2ecc71",
                "#3498db",
                "#95a5a6",
                "#9b59b6",
                "#f1c40f",
            ],
        },
        mounted:function(){
            // console.log(this.custid);
            $(".summary-btn i").removeClass("active");
            $(".detail-btn i").addClass("active");




            const vars={};

            var d = new Date(),
                n = d.getMonth(),
                y = d.getFullYear();
            this.monthsArr = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
            {
                this.today_mon_year=this.monthsArr[this.month]+"/"+this.year;
                this.query_month=this.month;
                this.query_year=this.year;
            }
            else
            {
                //this.today_mon_year=this.monthsArr[n]+"/"+y;
                //this.query_month=n;
                //this.query_year=y;
            }

            var userinfourl='/get/myinfo';

            $(document).on('click','#showpl',function(){
                //console.log("Show PL clicked");
                vueApp.show_pl_report();
            });

            $(document).on('click','#updatepl',function(){
                //console.log("Show PL clicked");
                vueApp.show_pl_report();
            });


            $(document).on('click','#showpe',function(){
                //console.log("Show PL clicked");
                vueApp.show_pe_report();
            });

            $(document).on('click','#updatepe',function(){
                //console.log("Show PL clicked");
                vueApp.show_pe_report();
            });


            $(document).on('click',"#showgst",function(){
                //console.log("Show GST clicked");
                vueApp.show_gst_report();
            });

            $(document).on('click',"#updategst",function(){
                //console.log("Update GST clicked");
                vueApp.show_gst_report();
            });

            $(document).on('click',"#showcon_analysis",function(){
                //console.log("Consumption Analysis")
                //vueApp.show_ca_report();
                vueApp.toggleresult(5);
            });

            $(document).on('click',"#updatecon_analysis",function(){
                //console.log("Consumption Analysis")
                vueApp.show_ca_report();
            });
            $(document).on('click',".notes",function(){
                console.log("notes");
                $("."+this.id).removeClass('d-none');
                if(!$("#"+this.id).parents().closest(".resultpane").hasClass('d-none'))
                {
                    $("#"+this.id).parents().closest(".resultpane").addClass('d-none');
                }
                $("#floating-btn").hide();
            });

            $('#carouselExampleIndicators').carousel({interval: false});

            $(document).on('click',"#showsales_recon",function(){
                //console.log("Sales recon");
                vueApp.toggleresult(4);
            });



            axios.get(userinfourl)
                .then(function (response) {
                    //console.log(response.data.id);
                    vueApp.userinfo=response.data;
                    vueApp.custid=response.data.id;
                }).catch(function(error){
                //console.log("Error");
            });


            // var resulturl='/reports/get/result/all/';
            // axios.get(resulturl)
            //     .then(function (response) {
            //         vueApp.results=response.data.result;
            //     }).catch(function(error){
            //     //console.log("Error");
            // });


            this.detectmobile();
            //console.log("Before mapping data");

            if(this.sel_report=="P_L")
            {
                console.log(this.query_month!='None');
                if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
                    this.show_pl_report();
                else
                    this.initialize_pl_data();
            }
            else if(this.sel_report=="GST")
            {
                if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
                    this.show_gst_report();
                else
                    this.initialize_gst_data();

            }
            else if(this.sel_report=="PUR_EFF")
            {
                if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
                    this.show_pe_report();
                else
                    this.initialize_pe_data();
            }
            else if(this.sel_report=="CON_ANA")
            {
                if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
                    this.show_ca_report();
                else
                    this.initialize_ca_data();
            }
            else if(this.sel_report=="S_C_R")
            {
                if(this.month!=null && this.month!="" && this.year!=null && this.year!="")
                    this.show_scr_report();
                else
                    this.initialize_scr_data();
            }

            this.initeditableforms();
            this.initPreloader();


            //console.log("After Axios PL API Pull")
            //console.log(current_result);


            //$('.btn-floating').draggabilly({containment: $( window )});
            //$('.btn-floating').on( 'dragStart', function( event, pointer ) {
            //    $(".btn-floating").trigger('click');
            //});
            //$('[data-toggle="popover"]').popover();
            <!--            $("#floating-btn").popover().on('shown.bs.popover', function (e) {-->
            <!--                var html="";-->
            <!--    		    html=html+'<div class="row">';-->
            <!--                html=html+'<div class="col-12 mt-1">';-->


        },
        computed:{
            salesinfo:function(){

                function rainbow() {
                    // 30 random hues with step of 12 degrees
                    var hue = Math.floor(Math.random() * 30) * 12;

                    return $.Color({
                        hue: hue,
                        saturation: 0.9,
                        lightness: 0.6,
                        alpha: 1
                    }).toHexString();
                }
                //console.log("Sales Info called");
                var values=[];
                this.salesvalues=[];
                this.saleslabels=[];
                this.salescolors=[];
                if(this.pl_loaded){

                    values=this.pl_data.results.Page3.table[0].records.slice(0,this.pl_data.results.Page3.table[0].records.length-1);
                    $.each(values,function(index,value){
                        vueApp.salesvalues.push(value.Col3);
                        vueApp.saleslabels.push(value.Col1);
                        vueApp.salescolors.push(rainbow());
                    });
                    return values;

                }
            },
            othersalesinfo:function(){
                //console.log("Sales Info called");
                var values=[];
                if(this.pl_loaded){
                    console.log(this.pl_data.results.Page3.table[1].records);
                    if(this.pl_data.results.Page3.table[1].records.length<=1){
                        values=this.pl_data.results.Page3.table[1].records;
                    }
                    else{
                        values=this.pl_data.results.Page3.table[1].records.slice(0,this.pl_data.results.Page3.table[1].records.length-1);
                    }

                    return values;

                }
            },
            pl_data_detail:function(){
                var valuesdetail=[];
                var valuesdetail1=[];
                if(this.pl_loaded){
                    //console.log(this.pl_data.results.Page3.table);
                    detailvalues=this.pl_data.results.Page3.table;
                    detailvalues1=detailvalues.slice(2,detailvalues.length);
                    $.each(detailvalues1,function(index,value){
                        $.each(detailvalues1[index].records,function(ind,val){
                            if(val.Col1 === "Total" || val.Col1 === "total"){
                                detailvalues1[index].total=val.Col3;
                            }
                        })
                    })
                    //console.log(detailvalues1);
                    return detailvalues1;
                }

            },
        },
        updated:function(){
            $('#pldatepicker').datepicker({
                format: "mm yyyy",
                startView: "months",
                minViewMode: "months",
                autoclose: true
            }).on('changeDate',function(e){
                vueApp.query_date=$('#pldatepicker').val();
                vueApp.query_month=vueApp.query_date.substr(0,vueApp.query_date.indexOf(' '));
                vueApp.query_year=vueApp.query_date.substr(vueApp.query_date.indexOf(' ')+1);
            });

            $('#pedatepicker').datepicker({
                format: "mm yyyy",
                startView: "months",
                minViewMode: "months",
                autoclose: true
            }).on('changeDate',function(e){
                vueApp.query_date=$('#pedatepicker').val();
                vueApp.query_month=vueApp.query_date.substr(0,vueApp.query_date.indexOf(' '));
                vueApp.query_year=vueApp.query_date.substr(vueApp.query_date.indexOf(' ')+1);
            });

            $('#gstdatepicker').datepicker({
                format: "mm yyyy",
                startView: "months",
                minViewMode: "months",
                autoclose: true
            }).on('changeDate',function(e){
                vueApp.query_date=$('#gstdatepicker').val();
                vueApp.query_month=vueApp.query_date.substr(0,vueApp.query_date.indexOf(' '));
                vueApp.query_year=vueApp.query_date.substr(vueApp.query_date.indexOf(' ')+1);
            });
            $('#TotalSales').on('shown.bs.collapse', function () {
                setTimeout(function() {
                    if(vueApp.saleschart == null)
                        vueApp.createChart();

                },200);
            });

        },
        methods: {
            showSelReport:function(notesid,repid)
            {
                if(!$("."+notesid).hasClass('d-none'))
                {
                    $("."+notesid).addClass('d-none');
                }
                $("#"+repid).removeClass('d-none');
                $("#floating-btn").show();
            },
            showSalesData:function(arg)
            {
                console.log("showSalesData : "+arg);
                this.salesDataType=arg;
                $(".sales-data").hide();
                $("."+arg).show();
                $(".sales-btn").removeClass("active");
                $("."+arg+"-btn").addClass("active");
                $(".period-table").hide();
                if(arg!="Total")
                {
                    $(".period-data-btn").show();
                }
                else
                {
                    $(".period-data-btn").hide();
                }
            },
            showPeriodData:function()
            {
                console.log("showPeriodData : "+this.salesDataType);
                $(".period-table").hide();
                $("#"+this.salesDataType+"-table").show();
            },
            loadSelectedReport:function(){
                console.log("load selected report");
                if(this.sel_report!=null && this.sel_report!="")
                {
                    var url="/reports/detail/"+this.sel_report;
                    if(this.query_month!=null && this.query_month!="" && this.query_year!=null && this.query_year!="")
                        url=url+"?month="+this.query_month+"&year="+this.query_year;
                    window.location.href=url;
                }
            },
            initPreloader: function () {
                $(window).on('load', function () {
                    $('#status').fadeOut();
                    $('#preloader').delay(350).fadeOut('slow');
                });
            },
            initeditableforms:function(){

                $(function () {

                    //modify buttons style
                    $.fn.editableform.buttons =
                        '<button type="submit" class="btn btn-success editable-submit btn-sm waves-effect waves-light"><i class="mdi mdi-check"></i></button>' +
                        '<button type="button" class="btn btn-danger editable-cancel btn-sm waves-effect waves-light"><i class="mdi mdi-close"></i></button>';


                    $('#report-type').editable({
                        prepend: "not selected",
                        mode: 'inline',
                        inputclass: 'form-control-sm',
                        source: [
                            {value: 'P_L', text: 'Profit & Loss Statement'},
                            {value: 'GST', text: 'GST Summary'},
<!--                            {value: 'CL_ST', text: 'Closing Stock'},-->
                            {value: 'CON_ANA', text: 'Consumption Analysis'},
                            {value: 'S_C_R', text: 'Sales Channel Reconciliation'},
<!--                            {value: 'SW_IN', text: 'Swiggy Invoice Level Reconciliation'},-->
<!--                            {value: 'SW_DUMP', text: 'Swiggy Dump Level Reconciliation'},-->
<!--                            {value: 'TDS', text: 'TDS Summary'},-->
                            {value: 'PUR_EFF', text: 'Purchase Efficiency'},
                        ],
                        display: function (value, sourceData) {
                            var colors = {"": "#98a6ad", 1: "#5fbeaa", 2: "#5d9cec"},
                                elem = $.grep(sourceData, function (o) {
                                    return o.value == value;
                                });

                            if (elem.length) {
                                $(this).text(elem[0].text).css("color", colors[value]);
                            } else {
                                $(this).empty();
                            }
                        }
                    });
                    $('#report-date').editable({
                        mode: 'inline',
                        inputclass: 'form-control-sm',
                        combodate: {
                            minYear: 2015,
                            maxYear: new Date().getFullYear(),
                            minuteStep: 1
                        }
                    });
                    $('#report-date').on('save', function(e, params) {
                        console.log(' mounted Saved value: ' + params.newValue);
                        if(params.newValue!=null && params.newValue!="")
                        {
                            vueApp.query_month=new Date(params.newValue).getMonth()+1;
                            vueApp.query_year=new Date(params.newValue).getFullYear();

                        }
                        else
                        {
                            vueApp.query_month='';
                            vueApp.query_year='';
                        }
                        console.log("vueApp.query_month : "+vueApp.query_month);
                        vueApp.loadSelectedReport();
                    });
                    $('#report-type').on('save', function(e, params) {
                        console.log(' mounted Selected saved  report value: ' + params.newValue);
                        if(params.newValue!=null && params.newValue!="")
                        {
                            vueApp.sel_report=params.newValue;
                            console.log("vueApp.sel_report : "+vueApp.sel_report);
                            vueApp.loadSelectedReport();
                        }
                    });

                });

            },
            initconeditableforms:function(){

                $(function () {

                    //modify buttons style
                    $.fn.editableform.buttons =
                        '<button type="submit" class="btn btn-success editable-submit btn-sm waves-effect waves-light"><i class="mdi mdi-check"></i></button>' +
                        '<button type="button" class="btn btn-danger editable-cancel btn-sm waves-effect waves-light"><i class="mdi mdi-close"></i></button>';


                    $('#change-con-type').editable({
                        prepend: "not selected",
                        mode: 'inline',
                        inputclass: 'form-control-sm',
                        source: vueApp.ca_data.results.changeConsumptionList,
                        display: function (value, sourceData) {
                            var colors = {"": "#98a6ad", 1: "#5fbeaa", 2: "#5d9cec"},
                                elem = $.grep(sourceData, function (o) {
                                    return o.value == value;
                                });

                            if (elem.length) {
                                $(this).text(elem[0].text).css("color", colors[value]);
                            } else {
                                $(this).empty();
                            }
                        }
                    });
                    $(".consumption-dtl").hide();
                    $('#change-con-type').editable('setValue','Consumption');
                    $("#Consumption").show();
                    $('#change-con-type').on('save', function(e, params) {
                        console.log(' mounted Selected saved  report value: ' + params.newValue);
                        $(".consumption-dtl").hide();
                        if(params.newValue!=null && params.newValue!="")
                        {

                            $("#"+params.newValue).show();
                        }
                    });

                });

            },
            map_pl_data: function(){
                var resulturl='/reports/get/result/specific/';
                console.log("Map PL Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "P_L"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined"))
                    {
                        console.log("Hey its map PL API");
                        current_result=response.data.result;
                        vueApp.pl_data=response.data.result;
                        vueApp.pl_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;

                        //console.log(vueApp.pl_data.results);

                        //console.log("Printing PL results")
                        //console.log(current_result);
                    }
                    vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                    $('#report-date').editable('setValue',vueApp.today_mon_year,true);

                }).catch(function(error){
                    //console.log("Error");
                });
                //console.log("After Axios PL API Pull")
                //console.log(current_result);
            },
            map_gst_data: function(){
                var resulturl='/reports/get/result/specific/';
                var current_result='';
                //console.log("Map GST Data");
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "GST"
                    }
                }).then(function (response) {
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        current_result=response.data.result;
                        vueApp.gst_data = response.data.result.results;
                        var b2b_total=0;
                        var b2c_total=0
                        vueApp.gst_loaded=true;
                        $.each(vueApp.gst_data.b2b,function(index,value){
                            b2b_total+=value.total_gst;
                            //console.log(value.total_gst);
                        });
                        //console.log(b2b_total);
                        vueApp.gst_data.b2b_total=b2b_total;

                        //console.log(vueApp.gst_data.b2b_total);
                        $.each(vueApp.gst_data.b2c,function(index,value){
                            b2c_total+=value.total_gst;
                            //console.log(value.total_gst);
                        });
                        //console.log(b2c_total);
                        vueApp.gst_data.b2c_total=b2c_total;
                        //console.log(vueApp.gst_data.b2c_total);

                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;

                    }
                    vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                    $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                }).catch(function(error){
                    //console.log("Error");
                });

            },
            map_pe_data: function(){
                var resulturl='/reports/get/result/specific/';
                console.log("Map PE Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "PUR_EFF"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        //console.log("Hey its map PL API");
                        current_result=response.data.result;
                        vueApp.pe_data=response.data.result;
                        var detailedlist=[];
                        var itemlist=[];
                        var finaldetailedlist=[]
                        $.each(vueApp.pe_data.results.itemsummaryTable,function(index,item){
                            itemlist.push(item.ItemName);
                        });
                        var summary={
                            "EfficiencyLoss":0,
                            "IdealPurchasingCost":0,
                            "ActualPurchasingCost":0
                        };
                        $.each(vueApp.pe_data.results.datesummaryTable,function(index,item){
                            summary.EfficiencyLoss+=item.EfficiencyLoss;
                            summary.IdealPurchasingCost+=item.IdealPurchasingCost;
                            summary.ActualPurchasingCost+=item.ActualPurchasingCost;
                        });
                        vueApp.pe_data.results.summary=summary;
                        console.log(itemlist);
                        // var jsonQobj=jsonQ(vueApp.pe_data.results.billdetailedTable);

                        $.each(itemlist,function(index,value){
                            var values1=[];
                            $.each(vueApp.pe_data.results.billdetailedTable,function(ind,val){
                                if(val.ItemName === itemlist[index])
                                {
                                    values1.push(val)
                                }
                            });
                            detailedlist.push(values1);
                        });

                        vueApp.pe_data.detailedlist=detailedlist;
                        vueApp.pe_loaded=true;

                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;


                        //console.log(vueApp.pl_data.results);

                        //console.log("Printing PL results")
                        //console.log(current_result);
                    }
                    vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                    $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            map_ca_data: function(){
                var resulturl='/reports/get/result/specific/';
                console.log("Map CA Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "CON_ANA"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        //console.log("Hey its map PL API");
                        current_result=response.data.result;
                        vueApp.ca_data=response.data.result;
                        var totalConsumption=0;
                        var totalPerConsumption=0.00;
                        var changeConsumptionList=[];
                        var consumpQtyTypeList={};
                        $.each(vueApp.ca_data.results.consumptionTable,function(index,item){
                            totalConsumption=totalConsumption+parseInt(item.ItemSummary.consumption);

                            consumpQtyTypeList[item.ItemSummary.ItemName.replace(/ /g,'')]=item.ItemSummary.UOM.toString();
                            $.each(item.detailedList,function(dtlindex,dtlitem){

                                if(dtlitem.Name=="% of consumption to total sales")
                                {
                                    totalPerConsumption=totalPerConsumption+dtlitem.value;
                                    //console.log(totalPerConsumption);
                                }
                            });
                        });
                        var itemChangeConsJson = {value:'Consumption',text: 'Consumption'};
                        changeConsumptionList.push(itemChangeConsJson);
                        $.each(vueApp.ca_data.results,function(key,keyval){


                            if(!key.includes("consumptionTable"))
                            {
                                var itemId=key.replace(/[%()_]/g,'');
                                var itemChangeConsJson = {value:itemId,text: key.replace(/_/g,' ')};

                                changeConsumptionList.push(itemChangeConsJson);
                                vueApp.ca_data.results[itemId]=vueApp.ca_data.results[key];
                            }

                        });


                        vueApp.ca_data.results.totalConsumption=totalConsumption;
                        vueApp.ca_data.results.totalPerConsumption=totalPerConsumption.toFixed(2);
                        vueApp.ca_data.results.changeConsumptionList=changeConsumptionList;
                        vueApp.ca_data.results.consumpQtyTypeList=consumpQtyTypeList;
                        vueApp.ca_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.$nextTick(function(){
                            vueApp.initconeditableforms();
                        });

                    }
                    vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                    $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            map_scr_data:function(){
            console.log("map_scr_data");
                var resulturl='/reports/get/result/specific/';
                console.log("Map SCR Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "S_C_R"
                    }
                }).then(function (response) {
                    console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        console.log("Hey its map SCR API");
                        current_result=response.data.result;
                        vueApp.scr_data=response.data.result;
                        var salesPlatformDiff=0;
                        var salesPlatformGrossDiff=0;
                        var summaryArr=[];
                        vueApp.swiggyHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.zomatoHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.dunzoHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.nearbuyHeadParticulars=["Customer price Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.dineoutHeadParticulars=["Customer price Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];

                        var particularDescArr=["Difference","Net Money receivable","Money actually received","Net Sales (after discounts)","Net Sales as per POS","Difference in net sales","Platform Fees","Net Income","Cancellations","Adjustments"];
                        var particularArr=["Difference","Expected net receipts","Actual receipts","Sales (Inclusive of GST) as per channel","Sales (inclucive of GST) as per POS","Net Sales Difference","Commission & other charges","Net Income","Cancelled orders cost","Other adjustments"];

                        $.each(vueApp.scr_data.results.reco_summary,function(index,item){
                            //console.log(item.Particulars);
                            if(item.Particulars!=null && item.Particulars!="")
                            {
                                if(item.Particulars=="Difference")
                                {
                                    salesPlatformDiff=salesPlatformDiff+parseInt(item.Total);
                                }
                                if(item.Particulars=="Net Sales Difference")
                                {
                                    salesPlatformGrossDiff=salesPlatformGrossDiff+parseInt(item.Total);
                                }
                                var arrInd=particularArr.indexOf(item.Particulars);
                                var partSumm=item;
                                partSumm.Particulars=particularDescArr[arrInd];
                                summaryArr[arrInd]=partSumm;
                            }


                        });
                        var netIncomeJson={};
                        var netSaleIndex=particularArr.indexOf("Sales (Inclusive of GST) as per channel");
                        var platSaleIndex=particularArr.indexOf("Commission & other charges");
                        netIncomeJson.Dineout=summaryArr[netSaleIndex].Dineout-summaryArr[platSaleIndex].Dineout;
                        netIncomeJson.Dunzo=summaryArr[netSaleIndex].Dunzo-summaryArr[platSaleIndex].Dunzo;
                        netIncomeJson.Nearbuy=summaryArr[netSaleIndex].Nearbuy-summaryArr[platSaleIndex].Nearbuy;
                        netIncomeJson.Particulars=particularDescArr[particularDescArr.indexOf("Net Income")];
                        netIncomeJson.Swiggy=summaryArr[netSaleIndex].Swiggy-summaryArr[platSaleIndex].Swiggy;
                        netIncomeJson.Total=summaryArr[netSaleIndex].Total-summaryArr[platSaleIndex].Total;
                        netIncomeJson.Zomato=summaryArr[netSaleIndex].Zomato-summaryArr[platSaleIndex].Zomato;
                        summaryArr[particularArr.indexOf("Net Income")]=netIncomeJson;
                        vueApp.scr_data.results.salesPlatformDiff=salesPlatformDiff.toFixed(2);
                        vueApp.scr_data.results.salesPlatformGrossDiff=salesPlatformGrossDiff.toFixed(2);
                        vueApp.scr_data.results.ItemSummary=summaryArr;
                        vueApp.scr_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        console.log(vueApp.scr_data.results);
                        vueApp.$nextTick(function(){
                            vueApp.showSalesData('Total');
                        });

                    }
                    vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                    $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                }).catch(function(error){
                    //console.log("Error");
                });
            },


            initialize_pl_data:function(){
                var resulturl='/reports/get/result/latest/';
                //console.log("Map PL Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "P_L"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        console.log("Hey its map PL API h");
                        console.log(response.data.result);
                        current_result=response.data.result;
                        vueApp.pl_data=response.data.result;
                        vueApp.pl_loaded=true;
                        var comments = response.data.result.comments.values.reduce(function(resJson, current) {
                            resJson[current.comment_category] = resJson[current.comment_category] || [];
                            resJson[current.comment_category].push(current);
                            return resJson;
                        }, {});
                        vueApp.pl_data.results.comments=comments;
                        console.log(vueApp.pl_data.results.comments);
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                        $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                        //vueApp.initeditableforms();

                        //console.log(vueApp.pl_data.results);

                        //console.log("Printing PL results")
                        //console.log(current_result);
                    }
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            initialize_gst_data:function(){
                var resulturl='/reports/get/result/latest/';
                var current_result='';
                //console.log("Map GST Data");
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "GST"
                    }
                }).then(function (response) {
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        current_result=response.data.result;
                        vueApp.gst_data = response.data.result.results;
                        var b2b_total=0;
                        var b2c_total=0
                        vueApp.gst_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                        $('#report-date').editable('setValue',vueApp.today_mon_year,true);

                        $.each(vueApp.gst_data.b2b,function(index,value){
                            b2b_total+=value.total_gst;
                            //console.log(value.total_gst);
                        });
                        //console.log(b2b_total);
                        vueApp.gst_data.b2b_total=b2b_total;

                        //console.log(vueApp.gst_data.b2b_total);
                        $.each(vueApp.gst_data.b2c,function(index,value){
                            b2c_total+=value.total_gst;
                            //console.log(value.total_gst);
                        });
                        //console.log(b2c_total);
                        vueApp.gst_data.b2c_total=b2c_total;
                        //console.log(vueApp.gst_data.b2c_total);
                    }
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            initialize_pe_data:function(){
                var resulturl='/reports/get/result/latest/';
                console.log("Map PE Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "PUR_EFF"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        console.log("Hey its map PL API");
                        current_result=response.data.result;
                        vueApp.pe_data=response.data.result;
                        console.log(vueApp.pe_data.results);
                        var detailedlist=[];
                        var itemlist=[];
                        var finaldetailedlist=[]
                        $.each(vueApp.pe_data.results.itemsummaryTable,function(index,item){
                            itemlist.push(item.ItemName);
                        });
                        var summary={
                            "EfficiencyLoss":0,
                            "IdealPurchasingCost":0,
                            "ActualPurchasingCost":0
                        };
                        $.each(vueApp.pe_data.results.datesummaryTable,function(index,item){
                            summary.EfficiencyLoss+=item.EfficiencyLoss;
                            summary.IdealPurchasingCost+=item.IdealPurchasingCost;
                            summary.ActualPurchasingCost+=item.ActualPurchasingCost;
                        });
                        vueApp.pe_data.results.summary=summary;
                        console.log(itemlist);
                        // var jsonQobj=jsonQ(vueApp.pe_data.results.billdetailedTable);

                        $.each(itemlist,function(index,value){
                            var values1=[];
                            $.each(vueApp.pe_data.results.billdetailedTable,function(ind,val){
                                if(val.ItemName === itemlist[index])
                                {
                                    values1.push(val)
                                }
                            });
                            detailedlist.push(values1);
                        });

                        vueApp.pe_data.detailedlist=detailedlist;
                        vueApp.pe_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                        $('#report-date').editable('setValue',vueApp.today_mon_year,true);


                        //console.log(vueApp.pl_data.results);

                        //console.log("Printing PL results")
                        //console.log(current_result);
                    }
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            initialize_ca_data:function(){
                var resulturl='/reports/get/result/latest/';
                console.log("Map CA Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "CON_ANA"
                    }
                }).then(function (response) {
                    //console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        //console.log("Hey its map PL API");
                        current_result=response.data.result;
                        vueApp.ca_data=response.data.result;
                        var totalConsumption=0;
                        var totalPerConsumption=0.00;
                        var changeConsumptionList=[];
                        var consumpQtyTypeList={};
                        $.each(vueApp.ca_data.results.consumptionTable,function(index,item){
                            totalConsumption=totalConsumption+parseInt(item.ItemSummary.consumption);

                            consumpQtyTypeList[item.ItemSummary.ItemName.replace(/ /g,'')]=item.ItemSummary.UOM.toString();
                            $.each(item.detailedList,function(dtlindex,dtlitem){

                                if(dtlitem.Name=="% of consumption to total sales")
                                {
                                    totalPerConsumption=totalPerConsumption+dtlitem.value;
                                    //console.log(totalPerConsumption);
                                }
                            });
                        });
                        var itemChangeConsJson = {value:'Consumption',text: 'Consumption'};
                        changeConsumptionList.push(itemChangeConsJson);
                        $.each(vueApp.ca_data.results,function(key,keyval){


                            if(!key.includes("consumptionTable"))
                            {
                                var itemId=key.replace(/[%()_]/g,'');
                                var itemChangeConsJson = {value:itemId,text: key.replace(/_/g,' ')};

                                changeConsumptionList.push(itemChangeConsJson);
                                vueApp.ca_data.results[itemId]=vueApp.ca_data.results[key];
                            }

                        });


                        vueApp.ca_data.results.totalConsumption=totalConsumption;
                        vueApp.ca_data.results.totalPerConsumption=totalPerConsumption.toFixed(2);
                        vueApp.ca_data.results.changeConsumptionList=changeConsumptionList;
                        vueApp.ca_data.results.consumpQtyTypeList=consumpQtyTypeList;
                        vueApp.ca_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                        $('#report-date').editable('setValue',vueApp.today_mon_year,true);

                        console.log("set consumption");
                        vueApp.$nextTick(function(){
                            vueApp.initconeditableforms();
                        });


                    }
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            initialize_scr_data:function(){
            console.log("initialize_scr_data");
                var resulturl='/reports/get/result/latest/';
                console.log("Map SCR Data");
                var current_result='';
                axios.get(resulturl,{
                    params: {
                        query_month: this.query_month,
                        query_year: this.query_year,
                        report_type: "S_C_R"
                    }
                }).then(function (response) {
                    console.log(response.data.result);
                    if(response.data.result!='' && response.data.result.length!=0 && (typeof response.data.result.results !== "undefined")){
                        console.log("Hey its map SCR API");
                        current_result=response.data.result;
                        vueApp.scr_data=response.data.result;
                        var salesPlatformDiff=0;
                        var salesPlatformGrossDiff=0;
                        var summaryArr=[];
                        vueApp.swiggyHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.zomatoHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.dunzoHeadParticulars=["Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.nearbuyHeadParticulars=["Customer price Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        vueApp.dineoutHeadParticulars=["Customer price Sales (Exclusive of GST) (Exclusive of cancelled and failed orders)","Sales (Exclusive of GST) after discounts","Sales (Inclusive of GST)","Commission and other charges (Inclusive of GST)","Total Commission and other Charges","Cancelled order costs","Total Cancelled order costs","A. Tax adjustments","B. Other adjustments","Total of Adjustments","Difference"];
                        var particularDescArr=["Difference","Net Money receivable","Money actually received","Net Sales (after discounts)","Net Sales as per POS","Difference in net sales","Platform Fees","Net Income","Cancellations","Adjustments"];
                        var particularArr=["Difference","Expected net receipts","Actual receipts","Sales (Inclusive of GST) as per channel","Sales (inclucive of GST) as per POS","Net Sales Difference","Commission & other charges","Net Income","Cancelled orders cost","Other adjustments"];
                        $.each(vueApp.scr_data.results.reco_summary,function(index,item){
                            //console.log(item.Particulars);
                            if(item.Particulars!=null && item.Particulars!="")
                            {
                                if(item.Particulars=="Difference")
                                {
                                    salesPlatformDiff=salesPlatformDiff+parseInt(item.Total);
                                }
                                if(item.Particulars=="Net Sales Difference")
                                {
                                    salesPlatformGrossDiff=salesPlatformGrossDiff+parseInt(item.Total);
                                }
                                var arrInd=particularArr.indexOf(item.Particulars);
                                var partSumm=item;
                                partSumm.Particulars=particularDescArr[arrInd];
                                summaryArr[arrInd]=partSumm;
                            }
                        });
                        console.log("summary arr");
                        var netIncomeJson={};
                        var netSaleIndex=particularArr.indexOf("Sales (Inclusive of GST) as per channel");
                        var platSaleIndex=particularArr.indexOf("Commission & other charges");
                        netIncomeJson.Dineout=summaryArr[netSaleIndex].Dineout-summaryArr[platSaleIndex].Dineout;
                        netIncomeJson.Dunzo=summaryArr[netSaleIndex].Dunzo-summaryArr[platSaleIndex].Dunzo;
                        netIncomeJson.Nearbuy=summaryArr[netSaleIndex].Nearbuy-summaryArr[platSaleIndex].Nearbuy;
                        netIncomeJson.Particulars=particularDescArr[particularDescArr.indexOf("Net Income")];
                        netIncomeJson.Swiggy=summaryArr[netSaleIndex].Swiggy-summaryArr[platSaleIndex].Swiggy;
                        netIncomeJson.Total=summaryArr[netSaleIndex].Total-summaryArr[platSaleIndex].Total;
                        netIncomeJson.Zomato=summaryArr[netSaleIndex].Zomato-summaryArr[platSaleIndex].Zomato;
                        summaryArr[particularArr.indexOf("Net Income")]=netIncomeJson;
                        vueApp.scr_data.results.salesPlatformDiff=salesPlatformDiff.toFixed(2);
                        vueApp.scr_data.results.salesPlatformGrossDiff=salesPlatformGrossDiff.toFixed(2);
                        vueApp.scr_data.results.ItemSummary=summaryArr;
                        vueApp.scr_loaded=true;
                        vueApp.query_month=response.data.result.month;
                        vueApp.query_year=response.data.result.year;
                        vueApp.today_mon_year=vueApp.monthsArr[vueApp.query_month-1]+"/"+vueApp.query_year;
                        console.log("scr today_mon_year : "+vueApp.today_mon_year);
                        $('#report-date').editable('setValue',vueApp.today_mon_year,true);
                        console.log(vueApp.scr_data.results);
                        vueApp.$nextTick(function(){
                            vueApp.showSalesData('Total');
                        });


                    }
                }).catch(function(error){
                    //console.log("Error");
                });
            },
            show_pl_report: function(){
                console.log("show pl data");
                this.map_pl_data();
                this.toggleresult(1);
            },

            show_gst_report:function(){
                this.map_gst_data();
                this.toggleresult(2);
            },
            show_pe_report: function(){
                this.map_pe_data();
                this.toggleresult(3);
            },
            show_ca_report: function(){
                this.map_ca_data();
                this.toggleresult(5);
            },
            show_scr_report: function(){
                this.map_scr_data();
                this.toggleresult(4);
            },

            detectmobile:function(){
                if(window.matchMedia("(max-width: 767px)").matches){
                    this.ismobile=true;
                }
            },
            toggleClass: function(index,index1,sublist){
                this.isActive = index+''+index1;
                if(this.isCollapse==null)
                    this.isCollapse=index+''+index1+"true";
                else if(this.isCollapse===index+''+index1+"true")
                    this.isCollapse=index+''+index1+"false";
                else
                    this.isCollapse=index+''+index1+"true";

                if(sublist.type=='graph')
                    this.createChart(sublist.subDetailData);
            },
            toggleresult:function(ind){
                var elems=$('.resultpane');

                $('.resultpane').each(function(index){
                    if(!$(this).hasClass('d-none')){
                        $(this).addClass('d-none');
                    }
                });

                $('.cardforresult').each(function(){
                    $(this).html('Show');
                    $(this).removeClass('badge-success');
                    $(this).addClass('badge-default');
                });

                if(ind==1){ //Profit and Loss statement
                    //console.log("I am here.");
                    $("#P_L_Result").removeClass('d-none');
                    $("#showpl").removeClass('badge-default');
                    $("#showpl").addClass('badge-success');
                    //console.log($("#showpl").html());
                    $("#showpl").html("Selected");
                }
                else if(ind ==2){ // GST Statement
                    $("#GST_Result").removeClass('d-none');
                    $("#showgst").removeClass('badge-default');
                    $("#showgst").addClass('badge-success');
                    $("#showgst").html("Selected");
                }
                else if(ind ==3){ // Purchase Efficiency Statement
                    $("#PE_Result").removeClass('d-none');
                    $("#showpe").removeClass('badge-default');
                    $("#showpe").addClass('badge-success');
                    $("#showpe").html("Selected");
                }
                else if(ind == 4){ // Sales Channel Reconciliation
                    $("#Sales_Result").removeClass('d-none');
                    $("#showsales_recon").removeClass('badge-default');
                    $("#showsales_recon").addClass('badge-success');
                    $("#showsales_recon").html("Selected");
                }
                else if(ind == 5){ // Consumption Analysis
                    $("#Con_Result").removeClass('d-none');
                    $("#showcon_analysis").removeClass('badge-default');
                    $("#showcon_analysis").addClass('badge-success');
                    $("#showcon_analysis").html("Selected");
                }
            },
            createChart: function() {
                var ctx = document.getElementById("salesChart").getContext('2d');
                this.saleschart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: this.saleslabels,
                        datasets: [{
                            backgroundColor: this.salescolors,
                            data: this.salesvalues
                        }]
                    },
                    options: {
                        responsive: false,
                        legend: {
                            display: false,
                            position: 'bottom',
                            onClick: null
                        },
                    }
                });

            }
        },
        created: function(){
            //console.log("hi");

            this.sel_report=this.reporttype;
            if(this.reporttype=="P_L")
            {
                $("#P_L_Result").removeClass('d-none');
            }
            if(this.reporttype=="GST")
            {
                $("#GST_Result").removeClass('d-none');
            }
            if(this.reporttype=="PUR_EFF")
            {
                $("#PE_Result").removeClass('d-none');
            }
            if(this.reporttype=="CON_ANA")
            {
                $("#Con_Result").removeClass('d-none');
            }
            if(this.reporttype=="S_C_R")
            {
                $("#Sales_Result").removeClass('d-none');
            }



        },
        watch:{
            pl_loaded: function(){
                // console.log("Hey Called PL watch");

            },

        },
        filters: {
            toString:function(x)
            {
                if (!x) return ''
                x=x.toString();
                return x;
            },
            twoDecimal:function(x)
            {
                if (!x) return ''
                x=x.toFixed(2);
                return x;
            },
            getUOM:function(x)
            {
                if (!x) return ''
                x=x.replace(/ /g,'');
                var val=vueApp.ca_data.results.consumpQtyTypeList[x];
                return val;
            },
            toCurrency: function (x) {
                x=x.toString();
                if (!x) return ''
                var afterPoint = '';
                if(x.indexOf('.') > 0)
                    afterPoint = x.substring(x.indexOf('.'),x.length);
                afterPoint=afterPoint.substring(0,3);
                x = Math.floor(x);
                x=x.toString();
                var lastThree = x.substring(x.length-3);
                var otherNumbers = x.substring(0,x.length-3);
                if(otherNumbers != '')
                    lastThree = ',' + lastThree;
                var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree + afterPoint;

                return res;
            },
            toPercent: function(x,y) {
                var value=parseFloat(x)/parseFloat(y);
                value=value*100;
                value=value.toFixed(2);

                // console.log("Percentage Value is ");
                // console.log(value);
                return value;
            }
        }
    });

</script>
{% endblock %}